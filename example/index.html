<script type="importmap">{ "imports": {
    "react": "https://esm.sh/react",
    "react-dom": "https://esm.sh/react-dom/client"
  }}</script>

<!--<script type="module"> import * as React from 'react'; window.React = React;</script>-->
<!--<script src="../dist/react-kapsule.js" defer></script>-->

<body></body>

<script type="module">
  import fromKapsule from 'https://esm.sh/react-kapsule';
  import { createElement } from 'react';
  import { createRoot } from 'react-dom';
  import Kapsule from 'https://esm.sh/kapsule';

  // Define kapsule component
  const ColoredTextKapsule = Kapsule({
    props: {
      color: { default: 'red' },
      text: {}
    },

    init(domElement, state) {
      state.elem = document.createElement('span');
      domElement.appendChild(state.elem);
    },

    update(state) {
      state.elem.style.color = state.color;
      state.elem.textContent = state.text;
    }
  });

  // Render via React
  const ColoredText = fromKapsule(ColoredTextKapsule);
  createRoot(document.body)
    .render(
      createElement(
        ColoredText,
        { color: 'blue', text: 'foo' }
      )
    );
</script>
